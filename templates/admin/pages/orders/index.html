{{define "content"}}
<div class="flex justify-between items-center mb-6">
    <h3 class="text-xl font-semibold text-gray-800">Danh sách đơn hàng</h3>
    <form method="GET" action="/admin/orders" class="flex items-center gap-2">
        <label for="status" class="text-sm text-gray-600">Lọc theo trạng thái:</label>
        <select id="status" name="status" onchange="this.form.submit()"
            class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-admin-green focus:border-admin-green">
            <option value="">Tất cả</option>
            <option value="pending" {{if eq .StatusFilter "pending"}}selected{{end}}>Chờ xử lý</option>
            <option value="confirmed" {{if eq .StatusFilter "confirmed"}}selected{{end}}>Đã xác nhận</option>
            <option value="processing" {{if eq .StatusFilter "processing"}}selected{{end}}>Đang giao</option>
            <option value="delivered" {{if eq .StatusFilter "delivered"}}selected{{end}}>Đã giao</option>
            <option value="cancelled" {{if eq .StatusFilter "cancelled"}}selected{{end}}>Đã hủy</option>
        </select>
    </form>
</div>

<div class="bg-white rounded-xl shadow-sm overflow-hidden">
    <div class="overflow-x-auto">
        <table class="w-full">
            <thead class="bg-gray-50">
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Mã đơn</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Khách hàng</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Tổng tiền</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Trạng thái</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Ngày đặt</th>
                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase">Thao tác</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-gray-200">
                {{range .Orders}}
                <tr class="hover:bg-gray-50 transition-colors">
                    <td class="px-6 py-4 text-sm font-mono text-gray-600">{{truncate .ID 8}}</td>
                    <td class="px-6 py-4 text-sm text-gray-800">{{if .User}}{{.User.Name}}{{else}}-{{end}}</td>
                    <td class="px-6 py-4 text-sm font-semibold text-gray-800">{{formatPrice .TotalAmount}}</td>
                    <td class="px-6 py-4">{{statusBadge .Status}}</td>
                    <td class="px-6 py-4 text-sm text-gray-600">{{formatDateTime .CreatedAt}}</td>
                    <td class="px-6 py-4 text-right">
                        <a href="/admin/orders/{{.ID}}" class="inline-flex items-center px-3 py-1.5 text-sm text-admin-green-dark hover:bg-admin-green-light rounded-lg transition-colors">
                            <i class="fas fa-eye mr-1"></i>Xem
                        </a>
                    </td>
                </tr>
                {{else}}
                <tr>
                    <td colspan="6" class="px-6 py-12 text-center text-gray-400">
                        <i class="fas fa-shopping-cart text-4xl mb-3 block opacity-50"></i>
                        Chưa có đơn hàng nào
                    </td>
                </tr>
                {{end}}
            </tbody>
        </table>
    </div>
</div>
{{end}}
